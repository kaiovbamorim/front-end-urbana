<section class="container-table">
    <div class="content">
        <header>
            <div class="title-table">
                <i class="pi pi-credit-card"></i>
                <div>
                    <h1>Cartões</h1>
                    <p>Esta página permite visualização de todos os cartões registrados no sistema, incluindo suas informações.</p>
                </div>
            </div>
        </header>
        <div *ngIf="cartoes.length > 0" class="card">
            <p-table [value]="cartoes">
                <ng-template pTemplate="header">
                    <tr>
                        <th>Nome Usuário</th>
                        <th>Nome Cartão</th>
                        <th>Número</th>
                        <th>Tipo</th>
                        <th>Status</th>
                        <th></th>
                        <th></th>
                    </tr>
                </ng-template>
                <ng-template pTemplate="body" let-cartao>
                    <tr>
                        <td>{{ cartao.nomeUsuario }}</td>
                        <td>{{ cartao.nome }}</td>
                        <td>{{ cartao.numero }}</td>
                        <td>{{ cartao.tipo }}</td>
                        <td>
                            <p-tag [value]="cartao.status ? 'ATIVO' : 'INATIVO'" [severity]="getStatus(cartao.status)" />
                        </td>
                        <td>
                            <p-toast />
                            <p-confirmPopup>
                                <ng-template pTemplate="content" let-message>
                                    <div class="flex flex-column align-items-center w-full gap-3 border-bottom-1 surface-border p-3 mb-3">
                                        <i [class]="message.icon" class="text-6xl text-primary-500"></i>
                                    </div>
                                </ng-template>
                            </p-confirmPopup>
                            <button 
                                type="button" 
                                pButton 
                                pRipple 
                                icon="pi pi-power-off" 
                                class="p-button-rounded p-button-text"
                                (click)="confirmAlterarStatusCartao($event, cartao.id, cartao.status)"
                                >
                            </button>
                        </td>
                        <td>
                            <p-toast />
                            <p-confirmPopup>
                                <ng-template pTemplate="content" let-message>
                                    <div class="flex flex-column align-items-center w-full gap-3 border-bottom-1 surface-border p-3 mb-3">
                                        <i [class]="message.icon" class="text-6xl text-primary-500"></i>
                                    </div>
                                </ng-template>
                            </p-confirmPopup>
                            <button 
                                type="button" 
                                pButton 
                                pRipple 
                                icon="pi pi-trash" 
                                class="p-button-rounded p-button-text"
                                (click)="confirmExcluirCartao($event, cartao.id)"
                                >
                            </button>
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
        <div class="sem-conteudo" *ngIf="cartoes.length == 0">
            <i class="pi pi-exclamation-triangle"></i>
            <h2>Não existem cartões cadastrados em sistema!</h2>
        </div>
    </div>
</section>
